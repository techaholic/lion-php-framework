WindowUtilities._oldGetPageSize=WindowUtilities.getPageSize;WindowUtilities.getPageSize=function(){var b=WindowUtilities._oldGetPageSize();var a=$("dock").getHeight();b.pageHeight-=a;b.windowHeight-=a;return b};Object.extend(Windows,{minimize:function(d,b){var c=this.getWindow(d);if(c&&c.visible){c.hide();var a=document.createElement("span");a.className="dock_icon";a.style.display="none";a.win=c;$("dock").appendChild(a);Event.observe(a,"mouseup",Windows.restore);$(a).update(c.getTitle());new Effect.Appear(a)}Event.stop(b)},restore:function(b){var a=Event.element(b);a.win.show();a.win.toFront();new Effect.Fade(a,{afterFinish:function(){a.remove()}})}});Event.observe(document,"click",function(b){var d=Event.element(b);var c=d.up(".dialog");var a=d==$("dock")||d.up("#dock");if(!c&&!a&&Windows.focusedWindow){Windows.blur(Windows.focusedWindow.getId())}});var currentTheme=0;function changeTheme(c){var a=Event.element(c).selectedIndex;if(a==currentTheme){return}var d,b;switch(a){case 0:d="mac_os_x";b="blur_os_x";break;case 1:d="bluelighting";b="greylighting";break;case 2:d="greenlighting";b="greylighting";break}Windows.windows.each(function(e){e.options.focusClassName=d;e.options.blurClassName=b;e.changeClassName(b)});Windows.focusedWindow.changeClassName(d);currentTheme=a}function initWebOS(){$R(1,3).each(function(a){var b=new Window({className:"mac_os_x",blurClassName:"blur_os_x",title:"window #"+a,width:250,height:150,top:100+a*50,left:100+a*50});b.getContent().update("<h1>Window #"+a+"</h1>");b.show()});$$("#theme select").first().selectedIndex=currentTheme;Event.observe($$("#theme select").first(),"change",changeTheme)}Event.observe(window,"load",initWebOS);
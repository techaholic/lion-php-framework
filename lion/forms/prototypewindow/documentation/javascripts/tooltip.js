TooltipManager={options:{cssClassName:"tooltip",delayOver:200,delayOut:1000,shiftX:10,shiftY:10,className:"alphacube",width:200,height:null,draggable:false,minimizable:false,maximizable:false,showEffect:Element.show,hideEffect:Element.hide},ajaxInfo:null,elements:null,showTimer:null,hideTimer:null,init:function(a,b,c){TooltipManager.options=Object.extend(TooltipManager.options,c||{});a=TooltipManager.options.cssClassName||"tooltip";TooltipManager.ajaxInfo=b;TooltipManager.elements=$$("."+a);TooltipManager.elements.each(function(d){d=$(d);var e=TooltipManager._getInfo(d);if(e.ajax){d.ajaxId=e.id;d.ajaxInfo=b}else{d.tooltipElement=$(e.id)}d.observe("mouseover",TooltipManager._mouseOver);d.observe("mouseout",TooltipManager._mouseOut)});Windows.addObserver(this)},addHTML:function(a,b){a=$(a);b=$(b);a.tooltipElement=b;a.observe("mouseover",TooltipManager._mouseOver);a.observe("mouseout",TooltipManager._mouseOut)},addAjax:function(b,a){b=$(b);b.ajaxInfo=a;b.observe("mouseover",TooltipManager._mouseOver);b.observe("mouseout",TooltipManager._mouseOut)},addURL:function(c,b,d,a){c=$(c);c.url=b;c.frameWidth=d;c.frameHeight=a;c.observe("mouseover",TooltipManager._mouseOver);c.observe("mouseout",TooltipManager._mouseOut)},close:function(){if(TooltipManager.tooltipWindow){TooltipManager.tooltipWindow.hide()}},preloadImages:function(b,a,c){if(!c){c=".gif"}$A(a).each(function(d){var e=new Image();e.src=b+"/"+d+c})},_showTooltip:function(c){if(this.element==c){return}while(c&&(!c.tooltipElement&&!c.ajaxInfo&&!c.url)){c=c.parentNode}this.element=c;TooltipManager.showTimer=null;if(TooltipManager.hideTimer){clearTimeout(TooltipManager.hideTimer)}var a=Position.cumulativeOffset(c);var e=c.getDimensions();if(!this.tooltipWindow){this.tooltipWindow=new Window("__tooltip__",TooltipManager.options)}this.tooltipWindow.hide();this.tooltipWindow.setLocation(a[1]+e.height+TooltipManager.options.shiftY,a[0]+TooltipManager.options.shiftX);Event.observe(this.tooltipWindow.element,"mouseover",function(f){TooltipManager._tooltipOver(f,c)});Event.observe(this.tooltipWindow.element,"mouseout",function(f){TooltipManager._tooltipOut(f,c)});this.tooltipWindow.height=TooltipManager.options.height;this.tooltipWindow.width=TooltipManager.options.width;if(c.ajaxInfo){var d=c.ajaxInfo.options.parameters;var b=d;if(c.ajaxId){if(d){d+="&id="+c.ajaxId}else{d="id="+c.ajaxId}}c.ajaxInfo.options.parameters=d||"";this.tooltipWindow.setHTMLContent("");this.tooltipWindow.setAjaxContent(c.ajaxInfo.url,c.ajaxInfo.options);c.ajaxInfo.options.parameters=b}else{if(c.url){this.tooltipWindow.setURL(c.url);this.tooltipWindow.setSize(c.frameWidth,c.frameHeight);this.tooltipWindow.height=c.frameHeight;this.tooltipWindow.width=c.frameWidth}else{this.tooltipWindow.setHTMLContent(c.tooltipElement.innerHTML)}}if(!c.ajaxInfo){this.tooltipWindow.show();this.tooltipWindow.toFront()}},_hideTooltip:function(a){if(this.tooltipWindow){this.tooltipWindow.hide();this.element=null}},_mouseOver:function(b){var a=Event.element(b);if(TooltipManager.showTimer){clearTimeout(TooltipManager.showTimer)}TooltipManager.showTimer=setTimeout(function(){TooltipManager._showTooltip(a)},TooltipManager.options.delayOver)},_mouseOut:function(b){var a=Event.element(b);if(TooltipManager.showTimer){clearTimeout(TooltipManager.showTimer);TooltipManager.showTimer=null;return}if(TooltipManager.tooltipWindow){TooltipManager.hideTimer=setTimeout(function(){TooltipManager._hideTooltip(a)},TooltipManager.options.delayOut)}},_tooltipOver:function(b,a){if(TooltipManager.hideTimer){clearTimeout(TooltipManager.hideTimer);TooltipManager.hideTimer=null}},_tooltipOut:function(b,a){if(TooltipManager.hideTimer==null){TooltipManager.hideTimer=setTimeout(function(){TooltipManager._hideTooltip(a)},TooltipManager.options.delayOut)}},_getInfo:function(a){var c=a.className.split(" ").detect(function(d){return d.indexOf("html_")==0});var b=true;if(c){b=false}else{c=a.className.split(" ").detect(function(d){return d.indexOf("ajax_")==0})}c=c.substr(c.indexOf("_")+1,c.length);return c?{ajax:b,id:c}:null},onBeforeShow:function(b,e){var d=parseFloat(e.getLocation().top);var c=e.element.getDimensions();if(d+c.height>TooltipManager._getScrollTop()+TooltipManager._getPageHeight()){var a=Position.cumulativeOffset(this.element);var d=a[1]-TooltipManager.options.shiftY-c.height;e.setLocation(d,a[0]+TooltipManager.options.shiftX)}},_getPageWidth:function(){return window.innerWidth||document.documentElement.clientWidth||0},_getPageHeight:function(){return window.innerHeight||document.documentElement.clientHeight||0},_getScrollTop:function(){return document.documentElement.scrollTop||window.pageYOffset||0},_getScrollLeft:function(){return document.documentElement.scrollLeft||window.pageXOffset||0}};